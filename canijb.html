<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rage’s jb checker</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white p-5">

    <h1 class="text-2xl text-center font-bold">Rage’s jb checker</h1>
    <div id="j"></div>
    <div class="text-center mt-5">
        Source: <a href="https://github.com/littlebyteorg/appledb" target="_blank" class="text-blue-400">littlebyteorg/appledb</a>
    </div>

    <script>
        const a = "https://api.github.com/repos/littlebyteorg/appledb/contents/jailbreakFiles";
        const b = "https://raw.githubusercontent.com/littlebyteorg/appledb/main/jailbreakFiles/";

        async function f() {
            try {
                const r = await fetch(a);
                const d = await r.json();
                d.filter(x => x.name.endsWith(".json")).forEach(x => g(x.name));
            } catch (e) {
                console.error("Err fetching files:", e);
            }
        }

        async function g(n) {
            try {
                const r = await fetch(b + n);
                const d = await r.json();
                h(d, n);
            } catch (e) {
                console.error(`Err fetching ${n}:`, e);
            }
        }

        function h(d, n) {
            const c = document.createElement("div");
            c.className = "bg-gray-800 p-5 rounded-lg mt-5 max-w-lg mx-auto";

            const t = document.createElement("h2");
            t.className = "text-xl font-semibold text-center";
            t.textContent = d.info?.name?.trim() || n.replace(".json", "");

            const p1 = m("Latest Version", d.info?.latestVer);
            const p2 = m("Type", d.info?.type);
            const p3 = m("Notes", d.info?.notes);

            const s = document.createElement("select");
            s.className = "w-full bg-gray-700 p-2 mt-2 rounded";
            s.innerHTML = `<option value="">Select a device</option>`;

            const i = document.createElement("div");
            i.className = "hidden bg-gray-700 p-3 rounded mt-3";

            const l = document.createElement("ul");
            let dm = {};

            d.compatibility.forEach(e => {
                e.devices.forEach(v => {
                    if (!dm[v]) dm[v] = new Set();
                    e.firmwares.forEach(fw => dm[v].add(fw));
                });
            });

            Object.keys(dm).sort().forEach(v => {
                let o = document.createElement("option");
                o.value = v;
                o.textContent = v;
                s.appendChild(o);
            });

            s.addEventListener("change", function () {
                const v = this.value;
                if (v) {
                    l.innerHTML = "";
                    dm[v].forEach(fw => {
                        let li = document.createElement("li");
                        li.textContent = fw;
                        l.appendChild(li);
                    });
                    i.classList.remove("hidden");
                } else {
                    i.classList.add("hidden");
                }
            });

            i.appendChild(l);

            c.append(t, p1, p2, p3, s, i);
            document.getElementById("j").appendChild(c);
        }

        function m(k, v) {
            const p = document.createElement("p");
            p.innerHTML = `<strong>${k}:</strong> ${v || "N/A"}`;
            return p;
        }

        f();
    </script>

</body>
</html>
